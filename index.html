<!DOCTYPE html>
<html>
<head>
	<title>Stopwatch</title>
</head>
<style type="text/css">
	#main{
		margin-left: 43%;
	}
	table{
		border: 1px solid black;
	}
	.itime input{
		width: 20px;
	}
</style>
<body>

<div id="main">
	<table id="clock1" border="0">
		<tr>
			<td class="time" id="hour">00</td>
			<td class="colon">:</td>
			<td class="time" id="minute">00</td>
			<td class="colon">:</td>
			<td class="time" id="second">00</td>
		</tr>
		<tr>
			<td><button onclick="start(this)">Start</button></td>
			<td></td>
			<td><button onclick="stop(this)">Stop</button></td>
			<td></td>
			<td><button onclick="reset(this)" ondblclick="masterreset()">Reset</button></td>
		</tr>
		<tr>
			<td class="itime"><input id="ihour" value="0"></td>
			<td class="colon">:</td>
			<td class="itime"><input id="iminute" value="0"></td>
			<td class="colon">:</td>
			<td class="itime"><input id="isecond" value="0"></td>
		</tr>
	</table>
</div>
<script type="text/javascript">
	var interval;
	var started=false;
	//function to reset the stopwatch to the given time
	function reset(element){
		var parent=element.parentNode.parentNode.parentNode.childNodes;
		//id=parent.getAttribute('id');
		//console.log(parent.childNodes[1].childNodes[0].childNodes);
		//console.log(parent);
		time=parent[0];
		buttons=parent[2];
		inputs=parent[4];

		//console.log(inputs.childNodes[1].childNodes[0].value);
		var h=parseInt(inputs.childNodes[1].childNodes[0].value);
		var m=parseInt(inputs.childNodes[5].childNodes[0].value);
		var s=parseInt(inputs.childNodes[9].childNodes[0].value);
		
		if((!h && h!=0) || (!m && m!=0) || (!s && s!=0))
		{	
			alert("Invalid Inputs");
			return 0;
		}
		//parent.childNodes[1].childNodes[0].childNodes;
		var hh=time.childNodes[1];
		var mm=time.childNodes[5];
		var ss=time.childNodes[9];

		//console.log(hh);
		
		t=parseInt(s/60);
		m+=t;
		s%=60;
		
		t=parseInt(m/60);
		h+=t;
		m%=60;

		h%=100;


		if(h<10)
			h=0+String(h);
		if(m<10)
			m=0+String(m);
		if(s<10)
			s=0+String(s);
		hh.innerHTML=h;
		mm.innerHTML=m;
		ss.innerHTML=s;
	}

	//function to start the stopwatch
	function start(element)
	{
		if(!started)
		{
			var parent=element.parentNode.parentNode.parentNode.childNodes;
			time=parent[0];
			updateTime(time);
			interval=setInterval(updateTime,1000);
			started=true;
		}
	}

	//function to update the time
	function updateTime(element)
	{
		console.log(element);
		var h=parseInt(time.childNodes[1].innerHTML);
		var m=parseInt(time.childNodes[5].innerHTML);
		var s=parseInt(time.childNodes[9].innerHTML)+1;

		t=parseInt(s/60);
		m+=t;
		s%=60;
		
		t=parseInt(m/60);
		h+=t;
		m%=60;

		h%=100;


		if(h<10)
			h=0+String(h);
		if(m<10)
			m=0+String(m);
		if(s<10)
			s=0+String(s);
		time.childNodes[1].innerHTML=h;
		time.childNodes[5].innerHTML=m;
		time.childNodes[9].innerHTML=s;
	}

	//function to stop the stopwatch
	function stop(element){
		clearInterval(interval);
		var parent=element.parentNode.parentNode.parentNode.childNodes;
		time=parent[0];
		buttons=parent[2];
		inputs=parent[4];


		
		inputs.childNodes[1].childNodes[0].value=time.childNodes[1].innerHTML;
		inputs.childNodes[5].childNodes[0].value=time.childNodes[5].innerHTML;
		inputs.childNodes[9].childNodes[0].value=time.childNodes[9].innerHTML;
		started=false;
	}

	function masterreset () {
		location.reload();
	}
</script>
</body>
</html>